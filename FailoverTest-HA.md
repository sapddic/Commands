### HANA load table for HA

```sql
Add-Type -AssemblyName 'System.Web'
$length = 10 ## characters
$nonAlphaChars = 0

$HostAddress = "sapvhbdrdb"
$InstanceNumber = "00"
$DatabaseUser = "SYSTEM"
$script:DatabasePassword = "Wedv84u%"


$hdbConnectionString = "Driver={HDBODBC};ServerNode=" + $HostAddress + ":3" + `
            $InstanceNumber + "15;UID=" + $DatabaseUser + ";PWD=" + $script:DatabasePassword +";"

function Get-ODBCData() 
    {
        Param($hanaConnectionString,$hdbsql)
      
        $Conn = New-Object System.Data.Odbc.OdbcConnection($hanaCOnnectionString)
        $Conn.open()
        $readcmd = New-Object System.Data.Odbc.OdbcCommand($hdbsql,$Conn)
        $readcmd.CommandTimeout = '300'
        $da = New-Object System.Data.Odbc.OdbcDataAdapter($readcmd)
        $dt = New-Object System.Data.DataTable
        [void]$da.fill($dt)
        $Conn.close()
        return $dt
    }
    
 While (1) {   
$pwd = [System.Web.Security.Membership]::GeneratePassword($length, $nonAlphaChars)
$InsTime = "{0:yyyy-MM-dd HH:mm:ss}" -f (get-date)
$InsertValues = "INSERT INTO BACKUPTEST (CODE, DATETIME) VALUES ('" + $pwd + "','" + $InsTime + "');"
Start-Sleep -Milliseconds 700
Get-ODBCData -hanaConnectionString $hdbConnectionString -hdbsql $InsertValues
Write-host "INSERT KEY, DATE"
}

```

### Create Backup table

```sql
     CREATE COLUMN TABLE "SYSTEM"."BACKUPTEST" ("ID" BIGINT CS_FIXED GENERATED BY DEFAULT AS IDENTITY NOT NULL ,
	 "CODE" NVARCHAR(30),
	 "DATETIME" NVARCHAR(30),
	 PRIMARY KEY ("ID")) UNLOAD PRIORITY 5 AUTO MERGE 


CREATE TABLE RESIDENCY (NAME CHAR(20), CITY CHAR (20) )
INSERT INTO RESIDENCY (NAME, CITY) VALUES ('hana', 'montana')
SELECT * FROM RESIDENCY


SELECT TOP 5 ID,CODE,DATETIME FROM BACKUPTEST
ORDER BY ID DESC

ID;CODE;DATETIME
9,406;id(E!9SK[:;2020-08-29 13:19:22

Add-Type -AssemblyName 'System.Web'
$length = 10 ## characters
$nonAlphaChars = 8


$pwd = [System.Web.Security.Membership]::GeneratePassword($length, $nonAlphaChars)
$InsTime = "{0:yyyy-MM-dd HH:mm:ss}" -f (get-date)


$string = "asdfadfnglkaslkngalkfnk2342419!1342@sadfadsfad?123412341adfafa"
$array = $string -split '' | Where-Object {$_ -ne ''}
Get-Random -InputObject $array -Minimum 8 -Maximum 8 -Count 10

SELECT DESTINATION_PATH 
FROM M_BACKUP_CATALOG_FILES 
WHERE BACKUP_ID >= (SELECT TOP 1 BACKUP_ID FROM M_BACKUP_CATALOG WHERE STATE_NAME = 'successful' AND ENTRY_TYPE_NAME = 'complete data backup'ORDER BY UTC_START_TIME desc)

```

